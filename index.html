<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Sol Argentino TV - Canal de Televisión Argentino</title>

  <!-- CSS -->
  <link rel="stylesheet" href="https://solargentinotv.com.ar/assets/css/satv.css">
  <link rel="stylesheet" href="https://solargentinotv.com.ar/assets/css/footer.css">
  <link rel="stylesheet" href="https://solargentinotv.com.ar/assets/css/MPlayer.css">
  <link rel="stylesheet" href="https://solargentinotv.com.ar/assets/css/apps.css">

  <!-- Favicon -->
  <link rel="icon" href="https://solargentinotv.com.ar/assets/media/images/Logo SATV WEB BETA.ico" type="image/x-icon">

  <style>
    @import url('https://solargentinotv.com.ar/assets/fonts/Gilroy/Gilroy.css');

    html,
    body {
      height: 100%;
      margin: 0;
      padding: 0;
    }

    /* Ajustes mínimos para el player-root */
    #player-react-root {
      width: 100%;
      max-width: 900px;
      margin: 20px auto;
    }

    .custom-mplayer {
      width: 100%;
      height: 480px;
    }

    /* puedes ajustar */
  </style>
</head>

<body>
  <div id="page-scroll">
    <header class="header">
      <div class="menu-container">
        <h1 class="logo">Sol Argentino TV</h1>
        <nav class="navbar">
          <ul class="nav-menu">
            <li><a href="index" class="active">Inicio</a></li>
            <li><a href="grilla">Programación</a></li>
            <li><a href="vivo">Ver Transmisión</a></li>
            <li><a href="noticias">Noticias</a></li>
            <li><a href="nosotros">Nosotros</a></li>
            <li><a href="contacto">Contacto</a></li>
          </ul>
        </nav>
      </div>
    </header>

    <main class="main-content">
      <section id="inicio">
        <div class="hero">
          <h1>Bienvenidos a Sol Argentino TV</h1>
          <p>Tu canal de TV en línea, donde la información y el entretenimiento se encuentran.</p>
        </div>
      </section>

      <section id="intro-video">
        <h2>Video Introductorio</h2>
        <!-- Aquí montamos React -->
        <div id="player-react-root"></div>
      </section>
    </main>

    <!-- Dependencias que el player podría necesitar globalmente -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <script src="https://cdn.dashjs.org/latest/dash.all.min.js"></script>

    <!-- React y ReactDOM (UMD globals) -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

    <!-- Script que carga el CDN dinámicamente (import() primero; si falla -> UMD fallback)
         y monta el componente en React. -->
    <script>
      (async function () {
        const CDN = 'https://cdn.jsdelivr.net/gh/satv2025/MPlayer-React-Normal-Version@main/build/MPlayerNormal.js';
        const rootId = 'player-react-root';

        function loadScript(src) {
          return new Promise((resolve, reject) => {
            const s = document.createElement('script');
            s.src = src;
            s.async = true;
            s.onload = () => resolve();
            s.onerror = (e) => reject(new Error('load script failed: ' + src));
            document.head.appendChild(s);
          });
        }

        function waitForGlobal(names, timeout = 5000) {
          const start = Date.now();
          return new Promise((resolve, reject) => {
            (function check() {
              for (const name of names) {
                const parts = name.split('.');
                let obj = window;
                let ok = true;
                for (const p of parts) {
                  if (!(p in obj)) { ok = false; break; }
                  obj = obj[p];
                }
                if (ok) return resolve(obj);
              }
              if (Date.now() - start > timeout) return reject(new Error('global not found: ' + names.join(',')));
              setTimeout(check, 80);
            })();
          });
        }

        let VideoPlayerComp = null;

        // 1) intentar import() dinámico (ESM) — es la forma "React moderna" si el bundle soporta ESM.
        try {
          const mod = await import(CDN);
          // posibles export names
          VideoPlayerComp = mod?.default || mod?.VideoPlayer || mod?.MPlayerNormal || mod;
          console.info('MPlayer loaded via import()', VideoPlayerComp);
        } catch (errImport) {
          console.warn('import() falló (probablemente CDN no exporta ESM). Intentando fallback UMD...', errImport);

          // 2) fallback: cargar el script como UMD y esperar global
          try {
            await loadScript(CDN);
            // probar nombres globales comunes que el bundle podría usar
            const globalObj = await waitForGlobal([
              'VideoPlayer',
              'MPlayerNormal',
              'MPlayerNormal.VideoPlayer',
              'satv.MPlayerNormal',
              'satv.VideoPlayer'
            ], 4000);

            // Normalizar
            VideoPlayerComp = (globalObj && (globalObj.VideoPlayer || globalObj.default || globalObj)) || window.VideoPlayer;
            console.info('MPlayer loaded via UMD global', VideoPlayerComp);
          } catch (errUmd) {
            console.error('No se pudo cargar MPlayerNormal desde el CDN con ninguno de los métodos.', errUmd);
            const root = document.getElementById(rootId);
            if (root) root.innerHTML = '<p style="color:red">Error: no se pudo cargar el reproductor desde CDN.</p>';
            return;
          }
        }

        // 3) Montar el componente con ReactDOM
        try {
          const rootEl = document.getElementById(rootId);
          if (!rootEl) {
            console.error('Elemento de montaje no encontrado:', rootId);
            return;
          }

          const props = {
            src: "https://solargentinotv.com.ar/assets/media/videos/Trailer%20SATV%20WEB%20BETA.mp4",
            poster: "https://solargentinotv.com.ar/assets/media/images/Logo SATV WEB BETA.ico",
            className: "custom-mplayer"
          };

          // Si VideoPlayerComp es el módulo entero (no la función), intentar obtener la propiedad correcta
          const Comp = VideoPlayerComp?.default || VideoPlayerComp?.VideoPlayer || VideoPlayerComp;

          if (!Comp) {
            rootEl.innerHTML = '<p style="color:red">Error: componente no encontrado en el bundle del CDN.</p>';
            console.error('Componente inválido recibido desde CDN:', VideoPlayerComp);
            return;
          }

          // Montaje con ReactDOM (UMD React ya cargado como global)
          ReactDOM.createRoot(rootEl).render(React.createElement(Comp, props));
          console.info('MPlayer montado correctamente.');
        } catch (errMount) {
          console.error('Error montando componente React:', errMount);
          const root = document.getElementById(rootId);
          if (root) root.innerHTML = '<p style="color:red">Error al montar el reproductor.</p>';
        }
      })();
    </script>

    <footer>
      <p>&copy; 2025 Sol Argentino TV - Todos los derechos reservados. Nos actualizamos cada día pensando en vos. <a
          href="contacto">Contactanos</a></p>
    </footer>
  </div>
</body>

</html>